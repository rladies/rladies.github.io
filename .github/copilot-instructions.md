# R-Ladies Website - AI Coding Instructions

## Architecture Overview

Hugo static site with Bootstrap 5 theme, data-driven from multiple sources:
- **Local data**: `data/chapters/`, `data/directory/`, `data/global_team/`, `data/rblogs/`
- **Remote data**: Fetched at build from `rladies/meetup_archive` (events, chapter metadata)
- **Content**: Multilingual (en/es/pt/fr) in `content/` with `_index.{lang}.md` pattern

## Key Commands

```bash
hugo server -D                    # Local dev with drafts
hugo --environment production     # Production build
npm install --prefix themes/hugo-rladies  # Install theme dependencies
```

## Directory Structure

```
config/_default/     # Hugo config (hugo.yaml, params.yaml, menu.yaml, languages.yaml)
content/             # Markdown content (multilingual)
data/chapters/       # Chapter JSON files (urlname, status, organizers, social_media)
data/directory/      # Directory member JSON files
themes/hugo-rladies/ # Theme with Bootstrap 5, amCharts, FullCalendar
scripts/             # R scripts for Airtable/data processing
```

## Data Patterns

### Chapter JSON (`data/chapters/*.json`)
```json
{
  "urlname": "rladies-city",
  "status": "active|inactive|prospective",
  "country": "Country",
  "city": "City",
  "social_media": {"meetup": "urlname", "email": "city@rladies.org"},
  "organizers": {"current": ["Name"], "former": ["Name"]}
}
```
File naming: `country-city.json` (lowercase, hyphenated)

### Data Merging
`themes/hugo-rladies/layouts/partials/head/data.html` loads all data at build time. Chapter data merges with remote meetup_archive via `funcs/merge_chapters.html` partial to add lat/lon, members, timezone.

## Template Conventions

### Hugo Templating
- Use `with` for nil-safe access: `{{ with .Params.field }}...{{ end }}`
- Access page params via `.Params`, not directly on page object
- `isset` only works on maps (`.Params`), not page objects

### Bootstrap 5 Patterns
- Use semantic classes: `row`, `col-*`, `card`, `btn`, `badge`, `nav`
- Spacing: `m-*`, `p-*`, `mb-*` utilities
- Grid: `row row-cols-1 row-cols-md-3` for responsive columns

### Accessibility
- Definition lists (`<dl>`) require `<dt>`/`<dd>` pairs - use `<div>` with `<p>` if no labels
- External links: `target="_blank" rel="noopener noreferrer"`
- Icons need `aria-hidden="true"` or accessible labels

## Multilingual Content

Files use language suffix: `_index.en.md`, `_index.es.md`, `_index.pt.md`, `_index.fr.md`

Translation strings in `i18n/{lang}.yaml`. Missing translations auto-generated by `scripts/missing_translations.R` with `translated: no` front-matter.

## Build Pipeline

GitHub Actions workflow:
1. R scripts process Airtable data
2. Clone external repos (directory, meetup_archive, awesome-rladies-blogs)
3. Hugo build with environment config
4. Deploy to GitHub Pages (production) or Netlify (preview)

## Common Tasks

### Adding a chapter
Create `data/chapters/country-city.json` with required fields (urlname, status, country, city)

### Modifying layouts
Theme layouts in `themes/hugo-rladies/layouts/`. Override by placing file in root `layouts/` with same path.

### Adding home page sections
Edit `themes/hugo-rladies/layouts/index.html` and create partial in `layouts/partials/home/`

## Reviewing New Content

### Automated Checks
PRs trigger `check-jsons.yaml` workflow validating JSON against schemas in `scripts/json_shema/`:
- `chapter.json` - Required: status, country, city, social_media, organizers.current
- `global-team.json` - Team member validation
- `mentoring.json` - Mentoring program validation

### Chapter PRs (`data/chapters/*.json`)
1. Verify filename matches pattern: `country-city.json` (lowercase, hyphenated)
2. Check `urlname` matches actual Meetup group URL
3. Validate `status` is one of: `active`, `inactive`, `prospective`
4. Ensure `social_media.meetup` matches `urlname`
5. Confirm `organizers.current` array has at least one name

### Blog PRs (`content/blog/YYYY/MM-DD-slug/`)
1. Front matter has: title, author, date, description
2. Images in same folder, referenced with relative paths
3. Tags exist or are appropriate new additions
4. For translations: `translated: yes` and correct language suffix

### Directory PRs (from `rladies/directory` repo)
Previews triggered via workflow_dispatch with artifact ID. Check:
- Profile photo displays correctly
- Social media links work
- Location renders on map

### Preview Deployments
- PRs get Netlify preview: `https://d{directory}-b{blogs}-r{runid}--rladies-dev.netlify.app`
- Bot comments preview link on PR
- Check: page renders, no Hugo warnings, links work, images load

## Style Guide

- R-Ladies purple: `#88398a` (defined in `themes/hugo-rladies/assets/style.scss` as `$primary`)
- Fonts: Open Sans (body), Inconsolata (code)
- Icons: Bootstrap Icons (`bi bi-*`) and FontAwesome (`fa fa-*`)
