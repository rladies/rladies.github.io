<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=author content="Athanasia Monika Mowinckel"><meta property="og:title" content="
Behind the scenes of R-Ladies IWD2018 Twitter action!

 - R-Ladies Global"><meta property="og:type" content="website"><meta property="og:description" content="Part 2: Deployment and Bot Wrangling!"><meta property="og:url" content="https://rladies.org/blog/2018/deployment/"><meta property="og:site_name" content="R-Ladies Global"><meta property="og:image" content="images/logo.png"><html lang=en xml:lang=en xmlns=http://www.w3.org/1999/xhtml><title>2. Behind the scenes of R-Ladies IWD2018 Twitter action!</title>
<link rel="shortcut icon" href=/images/favicon.png><link rel=stylesheet href=/rladies-bundle.min.min.a94c813a3b2b67792a934fd7b520e8864c8b3e104b9129be65fe0741bd288d99.css integrity="sha256-qUyBOjsrZ3kqk0/XtSDohkyLPhBLkSm+Zf4HQb0ojZk=" media=screen><script defer data-domain=rladies.org src=https://plausible.io/js/script.js></script></head><body><div class="jumbotron paral m-0" style="background-image:linear-gradient(to bottom,rgba(0,0,0,.6) 0%,rgba(0,0,0,.6) 100%),url(/images/user2017.jpg)" id=hero><a rel=alternate href=/ hreflang=en lang=en><div class=logo><img src=/images/logo.png alt="R-Ladies Global"></div></a></div><nav class="navbar navbar-expand-sm sticky-top border-bottom bg-white"><div class="container-fluid px-3"><a class=navbar-brand href=https://rladies.org/><img src=https://rladies.org//images/logo-wide.png height=30 alt="R-Ladies Global" class="d-inline-block align-text-top">
</a><button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#collapsibleNavbar aria-controls=collapsibleNavbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=collapsibleNavbar><ul class="navbar-nav ms-auto"><li class=nav-item><a class=nav-link href=/events/>Events</a></li><li class=nav-item><a class=nav-link href=/chapters/>Chapters</a></li><li class=nav-item><a class=nav-link href=/directory/>Directory</a></li><li class=nav-item><a class=nav-link href=/blog>Blog</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-expanded=false>Activities</a><ul class="dropdown-menu dropdown-menu-end"><li><a class=dropdown-item href=/activities/mentoring/>Mentoring Program</a></li><li><a class=dropdown-item href=/activities/gt-coordinated/>Coordinated by the Global Team</a></li><li><a class=dropdown-item href=/activities/rladies-blogs>Blogs by R-Ladies</a></li><li><a class=dropdown-item href=/press>In the press</a></li></ul></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# role=button data-bs-toggle=dropdown aria-expanded=false>About</a><ul class="dropdown-menu dropdown-menu-end"><li><a class=dropdown-item href=/about-us/mission/>Mission</a></li><li><a class=dropdown-item href=/about-us/involved/>Get involved</a></li><li><a class=dropdown-item href=/about-us/global-team/>Global Team</a></li><li><a class=dropdown-item href=/about-us/history/>History</a></li><li><a class=dropdown-item href=/news/>News</a></li><li><a class=dropdown-item href=/coc/>Code of Conduct</a></li></ul></li></ul></div></div></nav><main id=main class="container p-5 pt-4"><div class=row><div class="col-lg-10 col-xs-12 mx-auto"><article class=post><header class=entry-header><h1 class=section-title>2. Behind the scenes of R-Ladies IWD2018 Twitter action!</h1></header><div class=entry-content><h3 id=as-told-by-kelly-obriant>As told by Kelly O&rsquo;Briant</h3><p>On March the 8th, International Women&rsquo;s Day, we ran a continuous feed of awesome R-Ladies profiles from <a href=http://rladies.org/directory/>our directory</a> via <a href=https://twitter.com/rladies_iwd2018>@rladies_iwd2018</a>. It was a blast! And a lot of team work too! In this blog post, we&rsquo;ll cover the deployment and monitoring stages of our project. You can also read the <a href=/post/ideation_and_creation/>Part 1</a>.</p><h2 id=recap>Recap</h2><p>The great part about being put in charge of deploying a project, is that all the hard work is mostly done already! In this section, I&rsquo;ll describe how we deployed and monitored our twitter application for IWD 2018. Things didn&rsquo;t end up going exactly as planned, but lessons were learned and we were able to adjust our game plan on the fly while making some minor compromises.</p><p>To review, here is where the project stood when it came time for me to jump in:</p><p><em>All the hard work was taken care of already!</em></p><ul><li>Creating a twitter account and developer application</li><li>Preparing the screenshots</li><li>Preparing the tweets</li></ul><p><em>What my job was:</em></p><ul><li>Launch a docker/rocker image</li><li>Do a little testing</li><li>Start sending tweets on IWD2018</li><li>Cross fingers for success :)</li></ul><p><em>What I probably should have also done:</em></p><ul><li>Deployed the Docker twitter app on a cloud instance (in case of a power outage here at my house)</li><li>Determined whether we would get in trouble for adding twitter handles to the bot tweets</li></ul><h2 id=the-job>The job</h2><h3 id=launching-docker>Launching Docker</h3><p><em>Why use Docker?</em></p><p>I knew that we would need to be tweeting for roughly 48 hours (following March 8th around the globe) and I would never want to tie up my local R session for two whole days. A simple solution to this problem is to launch a local docker instance with R and RStudio installed.</p><p><em>Docker Resources</em></p><p>I started learning how to use docker a few months ago by following <a href=http://ropenscilabs.github.io/r-docker-tutorial/>this awesome docker/rocker tutorial from rOpenSciLabs</a>. I highly recommend it. Linking a local volume (file system) to a docker instance is super simple, and was basically all I needed to do to get this project up and running.</p><p>I cloned the GitHub repo we used for all our code and data, linked that volume to the docker instance and fired up some twitter tests!</p><h3 id=sending-the-tweets>Sending the Tweets</h3><p>My initial instinct was to try and run the tweeting code as a cron scheduled script. <a href=http://www.unixgeeks.org/security/newbie/unix/cron-1.html>What is cron?</a> I planned to set up crontab by <a href=https://www.ekito.fr/people/run-a-cron-job-with-docker/>modifying the Docker file</a> for Rocker.</p><p>But in keeping with the theme of &ldquo;simple wins out&rdquo;, I ended up just using a for loop and <code>Sys.sleep()</code>. I was paranoid about our account getting flagged as a malicious bot by the folks at twitter, so I thought it would help to add a couple of &ldquo;extra_seconds&rdquo; to each sleep cycle. This way we wouldn&rsquo;t be tweeting every six minutes on the dot. I have no idea whether this helped us or not&mldr; we still got blocked a few times.</p><p><em>Minimal Code:</em></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-r data-lang=r><span class=line><span class=cl><span class=n>tweet_lady</span> <span class=o>&lt;-</span> <span class=kr>function</span><span class=p>(</span><span class=n>entry_id</span><span class=p>,</span> <span class=n>tweet</span><span class=p>,</span> <span class=n>token</span><span class=p>){</span>
</span></span><span class=line><span class=cl>  <span class=nf>message</span><span class=p>(</span><span class=n>entry_id</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=n>pic_media</span> <span class=o>&lt;-</span> <span class=nf>paste0</span><span class=p>(</span><span class=s>&#34;screenshots/&#34;</span><span class=p>,</span><span class=n>entry_id</span><span class=p>,</span><span class=s>&#34;.png&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>try_tweet</span> <span class=o>&lt;-</span> <span class=nf>try</span><span class=p>(</span><span class=n>rtweet</span><span class=o>::</span><span class=nf>post_tweet</span><span class=p>(</span><span class=n>status</span> <span class=o>=</span> <span class=n>tweet</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                                      <span class=n>token</span> <span class=o>=</span> <span class=n>token</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                                      <span class=n>media</span> <span class=o>=</span> <span class=n>pic_media</span><span class=p>),</span> <span class=n>silent</span> <span class=o>=</span> <span class=kc>TRUE</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>if</span><span class=p>(</span><span class=nf>class</span><span class=p>(</span><span class=n>try_tweet</span><span class=p>)</span><span class=n>[1]</span> <span class=o>==</span> <span class=s>&#34;try-error&#34;</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=nf>print</span><span class=p>(</span><span class=nf>paste0</span><span class=p>(</span><span class=s>&#34;Tweeting failed on entry &#34;</span><span class=p>,</span> <span class=n>entry_id</span><span class=p>))</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=kr>return</span><span class=p>(</span><span class=n>try_tweet</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>extra_seconds</span> <span class=o>&lt;-</span> <span class=kr>function</span><span class=p>(){</span>
</span></span><span class=line><span class=cl>  <span class=nf>sample</span><span class=p>(</span><span class=m>2</span><span class=o>:</span><span class=m>12</span><span class=p>,</span><span class=m>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>for</span> <span class=p>(</span><span class=n>i</span> <span class=kr>in</span> <span class=m>1</span><span class=o>:</span><span class=m>433</span><span class=p>){</span>     <span class=c1># 433 rladies</span>
</span></span><span class=line><span class=cl>  <span class=n>lady</span> <span class=o>&lt;-</span> <span class=n>tweets[i</span><span class=p>,</span><span class=n>]</span>
</span></span><span class=line><span class=cl>  <span class=nf>print</span><span class=p>(</span><span class=n>lady</span><span class=o>$</span><span class=n>tweet</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=nf>tweet_lady</span><span class=p>(</span><span class=n>lady</span><span class=o>$</span><span class=n>entry_id</span><span class=p>,</span> <span class=n>lady</span><span class=o>$</span><span class=n>tweet</span><span class=p>,</span> <span class=n>token</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=nf>Sys.sleep</span><span class=p>(</span><span class=m>360</span> <span class=o>+</span> <span class=nf>extra_seconds</span><span class=p>())</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=monitoring-and-fixing-our-application>Monitoring and Fixing our Application</h3><p>The <code>tweet_lady</code> function is set up to return <code>try_tweet</code>. In the case of a tweeting failure, it was mighty helpful to be able to quickly run this function outside the for loop to see the error type. Our application went down a number of times (4?) during our 48 hour #IWD twitter storm, and so I ran this little piece of code many times as I tested and restored our app:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-r data-lang=r><span class=line><span class=cl><span class=n>err</span> <span class=o>&lt;-</span> <span class=nf>tweet_lady</span><span class=p>(</span><span class=n>tweets[id</span><span class=p>,</span><span class=n>]</span><span class=o>$</span><span class=n>entry_id</span><span class=p>,</span> <span class=n>tweets[id</span><span class=p>,</span><span class=n>]</span><span class=o>$</span><span class=n>tweet</span><span class=p>,</span> <span class=n>token</span><span class=p>)</span>
</span></span></code></pre></div><p>The error messages weren&rsquo;t always all that helpful, but it made me feel better to see them. Logs are comforting, you know? Our first application was blocked after three hours of tweeting, and we guessed that the shutdown was due in part to using ladies&rsquo; twitter handles in the body of the tweet messages. It would have been nice to continue to tag people in the tweets, but we decided to remove handles in order to get our application running again (and keep it running).</p><p>My wonderful R-Ladies friend, <a href=https://twitter.com/hfcfrick>Hannah Frick</a>, hit me up on slack and encouraged us to lean into the gamification of tagging twitter handles by hand. This ended up being really fun. I spent <em>a lot</em> of time watching the feed, and people were routinely swooping in to tag people before I ever got the chance! I&rsquo;m really happy with how this part turned out - thank you Hannah! And thank you to everyone who spent time tagging people and writing personal messages!</p><p>All of the other errors we had were fixed by switching application bots (we had three), regenerating a token, or some combination of those things.</p><h3 id=deployment-conclusion>Deployment Conclusion</h3><p>Twitter and running twitter bots is still mostly a mystery to me. Is it an art, a science? I have no idea. I&rsquo;m glad that this was an International Women&rsquo;s Day project, and didn&rsquo;t last a week or a month! That being said, I think I&rsquo;ll be carrying the feeling of engaging with this wonderful, fantastic #rladies #rstats community around with me for a long time. It was amazing! I&rsquo;m so glad and grateful for this opportunity. Here&rsquo;s to meeting more awesome R-Ladies in 2018!</p><h2 id=next-up-part-3>Next Up: Part 3</h2><p>Continue Reading Part 3: <a href=/post/conclusion/>The Grand Conclusion</a>!</p></div></article></div></div></main><div class="container col-md-8 offset-md-2"><div class="text-center my-3"><a href=#hero class="back-to-top d-inline-block text-decoration-none" aria-label="Back to top"><i class="fa fa-chevron-up chevron" aria-hidden=true></i></a></div></div><footer id=footer class="bg-primary text-white py-5"><div class=container><div class="row g-4 opacity-75"><div class="col-md-6 col-lg-3"><h3 class="h5 mb-3 text-white">Contact</h3><div class=mb-4><p class=mb-0><i class="fas fa-envelope me-2"></i>
<a href=mailto:info[at]rladies[dot]org class=text-white>info[at]rladies[dot]org</a></p></div><h3 class="h5 mb-3 text-white">Donate to R-Ladies</h3><a href="https://www.paypal.com/donate/?hosted_button_id=VB4EK67MJ373E" target=_blank class="text-primary btn btn-light btn-sm d-inline-flex align-items-center" rel=noopener><i class="fab fa-paypal me-2 text-primary"></i>
Donate via PayPal</a></div><div class="col-md-6 col-lg-3"><h3 class="h5 mb-3 text-white">Follow us</h3><div class="d-flex flex-wrap gap-3"><a href=https://www.linkedin.com/in/rladies target=_blank rel=me class="text-white fs-3 social-icon" aria-label=linkedin><i class="fa-brands fa-linkedin"></i>
</a><a href=https://bsky.app/profile/rladies.org target=_blank rel=me class="text-white fs-3 social-icon" aria-label=bluesky><i class="fa-brands fa-bluesky"></i>
</a><a href=https://hachyderm.io/@RLadiesGlobal target=_blank rel=me class="text-white fs-3 social-icon" aria-label=mastodon><i class="fa-brands fa-mastodon"></i>
</a><a href=https://instagram.com/rladiesglobal target=_blank class="text-white fs-3 social-icon" aria-label=instagram><i class="fa-brands fa-instagram"></i>
</a><a href=https://github.com/rladies target=_blank class="text-white fs-3 social-icon" aria-label=github><i class="fa-brands fa-github"></i>
</a><a href=https://www.meetup.com/pro/rladies/ target=_blank class="text-white fs-3 social-icon" aria-label=meetup><i class="fa-brands fa-meetup"></i>
</a><a href=https://youtube.com/channel/UCDgj5-mFohWZ5irWSFMFcng target=_blank class="text-white fs-3 social-icon" aria-label=youtube><i class="fa-brands fa-youtube"></i>
</a><a href=https://bsky.app/profile/weare.rladies.org target=_blank class="text-white fs-3 social-icon" aria-label=bluesky><i class="fa-brands fa-bluesky"></i></a></div></div><div class="col-md-6 col-lg-3"><h3 class="h5 mb-3 text-white">Code of Conduct</h3><div class="small text-white">R-Ladies is dedicated to providing a harassment-free
experience for everyone. We do not tolerate harassment
of participants in any form. Read our <a href=/coc>Code of Conduct</a></div></div><div class="col-md-6 col-lg-3"><h3 class="h5 mb-3 text-white"><i class="fas fa-globe me-2"></i>Languages</h3></div></div></div></footer><footer id=underfooter class="bg-tertiary py-3"><div class=container><div class="row align-items-center"><div class="col-md-6 text-center text-md-start mb-2 mb-md-0"><small class="text-white opacity-75">Copyright &copy; 2013, R-Ladies Global</small></div><div class="col-md-6 text-center text-md-end"><small class="text-white opacity-75">Design: A. M. Mowinckel |
Powered by <a href=https://gohugo.io/ rel=noopener class="text-white opacity-75">Hugo</a> & 
					<a href=https://www.netlify.com/ rel=noopener class="text-white opacity-75">Netlify</a></small></div></div></div></footer><script src=/rladies-bundle.min.a190b91aade7faf9b8fc49a81a1e17e3cb702cc859fb3ce8199e06514d1144e4.js integrity="sha256-oZC5Gq3n+vm4/EmoGh4X48twLMhZ+zzoGZ4GUU0RROQ=" crossorigin=anonymous defer></script></body></html>