---
title: " Receta para un video de fin de a침o"
author: "Yanina Bellini Saibene, Alejandra Bellini y Laura Acion"
date: "2020-01-27"
description: ""
tags:
- 2019
categories:
- R-Ladies
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Para cerrar el 2019 desde R-Ladies hicimos un video, si a칰n no lo viste, aqu칤 est치:

<blockquote class="twitter-tweet"><p lang="es" dir="ltr">Feliz a침o nuevo <a href="https://twitter.com/hashtag/rladies?src=hash&amp;ref_src=twsrc%5Etfw">#rladies</a> y aliados! 游꿀游꿀游꿀<br><br>Video preparado por <a href="https://twitter.com/yabellini?ref_src=twsrc%5Etfw">@yabellini</a> y <a href="https://twitter.com/_lacion_?ref_src=twsrc%5Etfw">@_lacion_</a>. Locuci칩n <a href="https://twitter.com/AlejaBellini?ref_src=twsrc%5Etfw">@alejabellini</a> 游눞游눞游눞 <a href="https://t.co/Bw9aRkaErj">pic.twitter.com/Bw9aRkaErj</a></p>&mdash; R-Ladies Global (@RLadiesGlobal) <a href="https://twitter.com/RLadiesGlobal/status/1212453642416078853?ref_src=twsrc%5Etfw">January 1, 2020</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> 


쯊e gust칩?, 쯈uer칠s saber c칩mo lo hicimos?, aqu칤 te cuento los detalles:

## 쯈u칠 historia vamos a contar?

El _primer paso_ es decidir _la historia a contar en el video_; los mensajes de fin de a침o, generalmente tienen tres partes: se repasa lo hecho, se agradece por los logros obtenidos y se dan buenos deseos para aquellos que nos acompa침aron en la vuelta al sol que termina.

As칤 que la historia de R-Ladies ser칤a _resaltar logros globales con n칰meros_ (despu칠s de todo somos gente que se dedica a las #rstats y los n칰meros de R-Ladies son maravillosos) y _agradecer a quienes nos acompa침aron_.

## Generando el gui칩n y la materia prima para el video

El _segundo paso_ es armar el gui칩n del video: tendr치 tres escenas.

### Primera escena: el alcance global

Se muestran n칰meros globales de R-Ladies donde se represente nuestra forma de organizarnos, qu칠 se hizo y cu치nto se creci칩 en 2019.  Para poder expresar esa idea los n칰meros de _cantidad de cap칤tulos, cantidad de pa칤ses, cantidad de integrantes y total de eventos realizados en el a침o 2019_ son indicadores concretos.  Los tres primeros los consultamos desde el [Tablero de la comunidad de R-Ladies](https://benubah.github.io/r-community-explorer/rladies.html).  La cantidad de eventos la calculamos utilizando el paquete [meetupr](https://github.com/rladies/meetupr) desarrollado por R-Ladies.

Lo primero es cargar los paquetes necesarios y generar las variables y funciones necesarias:

```
#API KEY de Meetup
Sys.setenv(MEETUP_KEY = "tu string de API Key")

#Paquetes necesarios para trabajar
library(meetupr)
library(purrr)
library(dplyr)
library(tidyr)
library(lubridate)


```

Ahora tenemos que obtener todos los grupos de meetup que corresponden a R-Ladies:

```
# Obteniendo todos los grupos de R-Ladies
all_rladies_groups <- find_groups(text = "r-ladies")

# Limpiando el listado
rladies_groups <- all_rladies_groups[grep(pattern = "rladies|r-ladies", 
                                          x = all_rladies_groups$name,
                                          ignore.case = TRUE), ]
```

Con el listado de grupos, buscamos todos los eventos realizados por cada uno de esos grupos y calculamos la cantidad:

```
# Obtengo todos los eventos ya realizados. 
eventos <- rladies_groups$urlname %>%
  map(purrr::slowly(safely(get_events)), event_status='past') %>% transpose()

# En eventos me queda una lista con todos los datos de los eventos: nombre, fecha, 
# lugar, descripci칩n y varios datos m치s.  
# Por el momento la lista tiene dos elementos: una lista con los resultados correctos 
# y otra con los errores. Da error cuando no hay eventos pasados en el grupo.

# S칩lo me interesa la informaci칩n que tenemos en resultados. Asi que me quedo con esa informaci칩n
# La lista de resultados tiene un tibble por grupo con los eventos realizados para ese grupo
# Voy a armar un solo tibble con todos los eventos juntos

#Creo un vector l칩gico con los eventos donde hay error


eventos_con_datos <- eventos$result %>% 
  map_lgl(is_null)

# Filtro los eventos correctos con el vector l칩gico anterior y luego uno todos los tibble
# por sus filas en uno solo utilizando la funci칩n map_dfr del paquete purrr

eventos_todos_juntos <- eventos$result[!eventos_con_datos] %>% 
  map_dfr(~ .) 

# Cuento la cantidad de eventos realizados por a침o

eventos_todos_juntos %>%
  group_by(year(time)) %>%
  summarise(cantidad=n())

``` 
Con todos los datos calculados, el texto de esa escena es el siguiente:

_"R-Ladies 2019 en n칰meros: M치s de 60.000 integrantes de 50 pa칤ses de todo el mundo, organizadas en 182 cap칤tulos que realizaron 858 eventos."_

Para ilustrar esta parte del mensaje, el mapa del mundo con la localizaci칩n de todos los cap칤tulos es una imagen poderosa y que ya hemos utilizado en otras campa침as.  Me gust칩 mucho el [mapa](https://github.com/rladiescolombo/R-Ladies_world_map) que hicieron las [R-Ladies Colombo](https://rladiescolombo.netlify.com/) para presentar su cap칤tulo asi que tom칠 de base su mapa para armar el del video, actualizando la informaci칩n al 27/12/2019 y asegurandome que todos los cap칤tulos cuenten con Latitud y Longitud para que sean mapeados.  

![](../image/MapaVideo.png)


Este es el c칩digo completo para hacerlo:

```
library(ggplot2)
library(maptools)
library(tibble)
library(readxl)
library(readr)
data(wrld_simpl)

# Este c칩digo genera el mapa del mundo y es tomado desde el c칩digo de R-Ladies Colombo
p <- ggplot() +
  geom_polygon(
    data = wrld_simpl,
    aes(x = long, y = lat, group = group), fill = "thistle", colour = "white"
  ) +
  coord_cartesian(xlim = c(-180, 180), ylim = c(-90, 90)) +
  scale_x_continuous(breaks = seq(-180, 180, 120)) +
  scale_y_continuous(breaks = seq(-90, 90, 100))

# Capitulos actuales de R-Ladies : https://github.com/rladies/starter-kit/blob/master/Current-Chapters.csv
# Leo los capitulos actuales de R-Ladies despues de descargarlo de la web
Current_Chapters <- read_csv(here::here("Current-Chapters.csv"))

#Leo una planilla con las ciudades de los cap칤tulos con los datos de latitud y longitud
LatLong <- read_excel(here::here("LatLong2019.xlsx")) 

#Uno los datos de los cap칤tuos con la latitud y longitud
Current_Chapters <- Current_Chapters %>% 
  left_join(LatLong, by = c("City", "State.Region", "Country")) %>%
  filter(!str_detect(Status, 'Retired.*'))

# Agrego los puntos de cada cap칤tulo al mapa del mundo
p <- p +
  geom_point(
    data = Current_Chapters, aes(x = Longitude, y = Latitude), color = "mediumpurple1", size
    = 3
  ) 
```


### Segunda escena: 100% trabajo voluntario

El objetivo es presentar tambi칠n _cifras de otras iniciativas de R-Ladies_ adem치s de los cap칤tulos y eventos, por lo que enfocamos en nuestros _medios de comunicaci칩n, nuestro directorio de personas expertas, nuestra red de revisi칩n y la generaci칩n de material educativo_ para nuestros meetups, conferencias, eventos con otras organizaciones,etc. Resaltando el esfuerzo de un trabajo voluntario para conseguir todos estos resultados.  El equipo de [R-Ladies Global](https://rladies.org/about-us/team/) me facilit칩 las cantidades referidas al [directorio de R-Ladies](https://rladies.org/directory/) y de la [red de revisi칩n](tinyurl.com/rladiesrevs).  Para la calcular la cantidad de seguidores de nuestras cuentas de twitter, utilizamos R y el paquete `rtweet` con el siguiente c칩digo:


```
#Cargo los paquetes necesarios
library(dplyr)
library(lubridate)
library(stringr)
library(tidyr)
library(rtweet)

#Obtengo todos los usuarios que tengan la palabra RLadies
users <- search_users(q = 'RLadies',
                      n = 1000,
                      parse = TRUE)

#Luego debo quedarme con los usuarios 칰nicos
rladies <- unique(users) %>%
  #La expresi칩n regular busca un string que contenga la palabra RLadies 칩 rladies, en cualquier parte 
  #de la cadena de caracteres   
  filter(str_detect(screen_name, '[R-r][L-l](adies).*') & 
           # Filtro usuarios que cumplen la condici칩n de la expresi칩n regular pero no son cuentas
           # relacionadas a R-Ladies
           !screen_name %in% c('RLadies', 'RLadies_LF', 'Junior_RLadies', 'QueensRLadies', 
                               'WomenRLadies', 'Rstn_RLadies13', 'RnRladies')) %>%
  #Me quedo con estas tres variables que me permiten identificar  cada cuenta 
  #con la cantidad de seguidores que tiene cada una
  select(screen_name, location, followers_count)

#Calculo el total de seguidores de todas las cuentas
rladies %>% 
  summarise(sum(followers_count))

```

La im치gen seleccionada para acompa침ar esta parte fue tomada en LatinR 2019: 춰춰 estabamos preparandonos para la foto grupal de R-Ladies y sin darnos cuenta formamos un coraz칩n !! (que fue capturado por el ojo y la c치mara de [TuQmano](https://twitter.com/TuQmano)).  La imagen representa el crecimiento de R-Ladies en otras regiones del mundo m치s all치 del norte y el c칩digo que nos mueve a trabajar en equipo por el bienestar de R-Ladies y de la comunidad en general.


![](../image/corazon.png)

El texto de la escena qued칩 armado de la siguiente manera:

_Tenemos m치s de 65,000 seguidores en nuestras cuentas de Twitter, 940 personas expertas en el directorio de R-Ladies, 80 revisoras internacionales en nuestra red de revisi칩n y producimos m치s de 600 documentos con materiales did치cticos. Todo hecho con 100% trabajo voluntario_


### Tercera escena: 춰buenos deseos!

Aqu칤 la frase fue desear feliz a침o para R-Ladies y tambi칠n para todos los aliados y aliadas que nos acompa침aron durante el a침o.  La imagen seleccionada fue nuestro logo y la direcci칩n de nuestra web.

El texto que acompa침a la escena qued칩 as칤:

_춰Feliz a침o nuevo a todas las R-Ladies y aliados! M치s informaci칩n en rladies punto org_


![](../image/placafinal.png) 

### Idioma

Siendo R-Ladies una comunidad global, el video ten칤a que estar en Ingl칠s: el idioma que habla el mundo.  쯇ero por qu칠 no tambi칠n en Espa침ol?, la comunidad latinoamerica de R ha crecido muchisimo en este tiempo y en gran parte ha sido gracias al esfuerzo y trabajo de las R-Ladies en esta regi칩n del mundo, as칤 que decidimos generarlo en ambos idiomas para festejar este arduo trabajo. [Laura Acion](https://twitter.com/_lacion_/) se encarg칩 de corregir y traducir el texto de cada escena.

### Texto, im치genes... 쯔udio?

Ahora bien, un video s칩lo con letras, n칰meros e im치genes dejar칤a mucha gente fuera de nuestro mensaje, as칤 que decidimos grabar el audio del mensaje y para eso la genia de [Alejandra Bellini](https://twitter.com/AlejaBellini), grab칩 los audios en Espa침ol e Ingl칠s.  Lo grab칩 utilizando WhatsApp con un celular, luego utilic칠 [Zamzar](https://www.zamzar.com) para transformar el audio a MP3 y [Mp3cut](https://mp3cut.net/es/) para cortar ese audio en las partes necesarias para poder sincronizar el audio con el texto y las im치genes de video.


## Tercer paso: editando...

_Tercer paso_: con el plan en mente, lleg칩 el momento de editar el video.  Lo hice utilizando Doodly para los efectos de la mano que dibuja. Tanto la m칰sica como las fuentes las provee el software.  La parte m치s trabajosa fue la sincronizaci칩n del audio con el dibujo de los n칰meros y letras.  

El resultado fueron dos videos en Espa침ol e Ingl칠s, donde contamos en un minuto que hizo R-Ladies durante el 2019, fue una tarea muy divertida, hubo muchas risas e intentos, especialmente la grabaci칩n del texto en Ingl칠s.

La exportaci칩n posterior del video se pas칩 al equipo Global para su difusi칩n por las redes sociales el 31 de Diciembre de 2019.

[English version](https://blog.rladies.org/post/rladies_video_2019/)